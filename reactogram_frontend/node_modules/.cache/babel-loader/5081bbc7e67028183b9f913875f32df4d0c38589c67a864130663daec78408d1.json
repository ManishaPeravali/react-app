{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Samuel/Desktop/react-app/tReactogram---insta/reactogram_frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Samuel/Desktop/react-app/tReactogram---insta/reactogram_frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Samuel/Desktop/react-app/tReactogram---insta/reactogram_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Card from\"../components/card\";import\"../pages/postoverview.css\";import axios from\"axios\";import Swal from\"sweetalert2\";import{API_BASE_URL}from\"../config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostOverview=function PostOverview(){//creating config_obj to configure the authorized user\nvar CONFIG_OBJ={headers:{\"content-type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"token\")}};var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allposts=_useState2[0],setAllPosts=_useState2[1];var GetAllPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(API_BASE_URL,\"/allposts\"));case 2:response=_context.sent;//debugger;\nif(response.status===200){setAllPosts(response.data.posts);}else{Swal.fire({icon:\"error\",title:\"Some error occured\"});}case 4:case\"end\":return _context.stop();}},_callee);}));return function GetAllPosts(){return _ref.apply(this,arguments);};}();useEffect(function(){GetAllPosts();},[]);//API call for delete post\nvar deletePost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(postId){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:console.log(postId);//debugger;\n_context2.next=3;return axios.delete(\"\".concat(API_BASE_URL,\"/deletepost/\").concat(postId),CONFIG_OBJ);case 3:response=_context2.sent;if(response.status===200){GetAllPosts();}else{Swal.fire({icon:\"error\",title:\"Some error occured\"});}case 5:case\"end\":return _context2.stop();}},_callee2);}));return function deletePost(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-md-5 mt-3 \",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",style:{marginTop:\"7px\"},children:allposts.map(function(post){return/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3  col-sm-12 mb-sm-2\",id:\"postspace\",children:[\" \",/*#__PURE__*/_jsx(Card,{postData:post,deletePost:deletePost,GetAllPosts:GetAllPosts}),\" \"]},post._id);}).reverse()})});};export default PostOverview;","map":{"version":3,"names":["React","useEffect","useState","Card","axios","Swal","API_BASE_URL","PostOverview","CONFIG_OBJ","headers","Authorization","localStorage","getItem","allposts","setAllPosts","GetAllPosts","get","response","status","data","posts","fire","icon","title","deletePost","postId","console","log","delete","marginTop","map","post","_id","reverse"],"sources":["C:/Users/Samuel/Desktop/react-app/tReactogram---insta/reactogram_frontend/src/pages/postoverview.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Card from \"../components/card\";\r\nimport \"../pages/postoverview.css\";\r\nimport axios from \"axios\";\r\nimport Swal from \"sweetalert2\";\r\nimport { API_BASE_URL } from \"../config\";\r\n\r\nconst PostOverview = () => {\r\n  //creating config_obj to configure the authorized user\r\n  const CONFIG_OBJ = {\r\n    headers: {\r\n      \"content-type\": \"application/json\",\r\n      Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\r\n    },\r\n  };\r\n\r\n  const [allposts, setAllPosts] = useState([]);\r\n  const GetAllPosts = async () => {\r\n    const response = await axios.get(`${API_BASE_URL}/allposts`);\r\n    //debugger;\r\n    if (response.status === 200) {\r\n      setAllPosts(response.data.posts);\r\n    } else {\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Some error occured\",\r\n      });\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    GetAllPosts();\r\n  }, []);\r\n  //API call for delete post\r\n  const deletePost = async (postId) => {\r\n    console.log(postId);\r\n    //debugger;\r\n    const response = await axios.delete(\r\n      `${API_BASE_URL}/deletepost/${postId}`,\r\n      CONFIG_OBJ\r\n    );\r\n    if (response.status === 200) {\r\n      GetAllPosts();\r\n    } else {\r\n      Swal.fire({\r\n        icon: \"error\",\r\n        title: \"Some error occured\",\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"container mt-md-5 mt-3 \">\r\n      <div className=\"row\" style={{ marginTop: \"7px\" }}>\r\n        {allposts\r\n          .map((post) => {\r\n            return (\r\n              <div\r\n                className=\"col-md-3  col-sm-12 mb-sm-2\"\r\n                id=\"postspace\"\r\n                key={post._id}\r\n              >\r\n                {\" \"}\r\n                <Card\r\n                  postData={post}\r\n                  deletePost={deletePost}\r\n                  GetAllPosts={GetAllPosts}\r\n                />{\" \"}\r\n              </div>\r\n            );\r\n          })\r\n          .reverse()}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostOverview;\r\n"],"mappings":"6eAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAOC,KAAI,KAAM,oBAAoB,CACrC,MAAO,2BAA2B,CAClC,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,KAAI,KAAM,aAAa,CAC9B,OAASC,YAAY,KAAQ,WAAW,CAAC,wFAEzC,GAAMC,aAAY,CAAG,QAAfA,aAAY,EAAS,CACzB;AACA,GAAMC,WAAU,CAAG,CACjBC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,aAAa,CAAE,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CACzD,CACF,CAAC,CAED,cAAgCV,QAAQ,CAAC,EAAE,CAAC,wCAArCW,QAAQ,eAAEC,WAAW,eAC5B,GAAMC,YAAW,4FAAG,uKACKX,MAAK,CAACY,GAAG,WAAIV,YAAY,cAAY,QAAtDW,QAAQ,eACd;AACA,GAAIA,QAAQ,CAACC,MAAM,GAAK,GAAG,CAAE,CAC3BJ,WAAW,CAACG,QAAQ,CAACE,IAAI,CAACC,KAAK,CAAC,CAClC,CAAC,IAAM,CACLf,IAAI,CAACgB,IAAI,CAAC,CACRC,IAAI,CAAE,OAAO,CACbC,KAAK,CAAE,oBACT,CAAC,CAAC,CACJ,CAAC,qDACF,kBAXKR,YAAW,0CAWhB,CACDd,SAAS,CAAC,UAAM,CACdc,WAAW,EAAE,CACf,CAAC,CAAE,EAAE,CAAC,CACN;AACA,GAAMS,WAAU,6FAAG,kBAAOC,MAAM,oIAC9BC,OAAO,CAACC,GAAG,CAACF,MAAM,CAAC,CACnB;AAAA,uBACuBrB,MAAK,CAACwB,MAAM,WAC9BtB,YAAY,wBAAemB,MAAM,EACpCjB,UAAU,CACX,QAHKS,QAAQ,gBAId,GAAIA,QAAQ,CAACC,MAAM,GAAK,GAAG,CAAE,CAC3BH,WAAW,EAAE,CACf,CAAC,IAAM,CACLV,IAAI,CAACgB,IAAI,CAAC,CACRC,IAAI,CAAE,OAAO,CACbC,KAAK,CAAE,oBACT,CAAC,CAAC,CACJ,CAAC,uDACF,kBAfKC,WAAU,6CAef,CACD,mBACE,YAAK,SAAS,CAAC,yBAAyB,uBACtC,YAAK,SAAS,CAAC,KAAK,CAAC,KAAK,CAAE,CAAEK,SAAS,CAAE,KAAM,CAAE,UAC9ChB,QAAQ,CACNiB,GAAG,CAAC,SAACC,IAAI,CAAK,CACb,mBACE,aACE,SAAS,CAAC,6BAA6B,CACvC,EAAE,CAAC,WAAW,WAGb,GAAG,cACJ,KAAC,IAAI,EACH,QAAQ,CAAEA,IAAK,CACf,UAAU,CAAEP,UAAW,CACvB,WAAW,CAAET,WAAY,EACzB,CAAC,GAAG,GAPDgB,IAAI,CAACC,GAAG,CAQT,CAEV,CAAC,CAAC,CACDC,OAAO,EAAE,EACR,EACF,CAEV,CAAC,CAED,cAAe1B,aAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}